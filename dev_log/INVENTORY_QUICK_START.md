# 背包页面快速使用指南

## 🎮 如何查看背包

1. **打开角色详情页**
   - 在游戏中点击任意角色
   - 角色详情面板会弹出

2. **切换到背包页**
   - 在顶部标签栏找到 **"背包"** 标签
   - 点击切换到背包页面
   - 标签顺序：基础 → 能力 → 特性 → 装备 → 专长 → **背包** → 其他

## 📦 背包界面说明

### 顶部统计栏
```
背包
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
道具数量: 150  总重量: 123.5  总价值: 8500
```

### 道具卡片布局
```
┌─────────────────────────────────────────┐
│ 🗡️ │ 铁剑 (稀有)                     x1  │
│    │ 武器 · 稀有                          │
│    │ 一把普通的铁制长剑                   │
│    │ ⚖️ 3.5  💰 50      [装备] [丢弃]     │
└─────────────────────────────────────────┘
```

### 道具颜色
- **灰色边框** = 普通道具
- **绿色边框** = 罕见道具
- **蓝色边框** = 稀有道具
- **紫色边框** = 史诗道具
- **橙色边框** = 传说道具

## 🎯 操作说明

### 查看详情
- **点击道具卡片** → 弹出详细信息窗口
- 查看完整属性、描述和自定义属性
- 点击外部或关闭按钮退出

### 使用消耗品
1. 找到可使用的道具（有"使用"按钮）
2. 点击 **[使用]** 按钮
3. 道具效果立即生效
4. 堆叠数量自动 -1

**示例：生命药水**
```
使用前: 生命药水 x15
使用后: 生命药水 x14
HP: 50 → 100 (恢复50点)
```

### 装备物品
1. 找到可装备的道具（有"装备"按钮）
2. 点击 **[装备]** 按钮
3. 显示装备提示

> 注意：完整装备系统待实现

### 丢弃道具
1. 点击任意道具的 **[丢弃]** 按钮
2. 确认弹窗：`确定要丢弃 xxx (x数量) 吗？`
3. 点击"确定"后道具从背包移除

## 🧪 测试道具

### 快速添加测试道具

**方法1：控制台命令**
```javascript
// 按 F12 打开浏览器控制台，输入：
window.addTestItems = async function() {
  const { addTestItemsToAllPlayers } = await import('@/components/CharacterDetailPannel/pages/InventoryTestUtil.ts');
  addTestItemsToAllPlayers();
}
window.addTestItems();
```

**方法2：在游戏代码中调用**
```typescript
import { addTestItemsToUnit } from '@/components/CharacterDetailPannel/pages/InventoryTestUtil';
import { golbalSetting } from '@/core/golbalSetting';

// 为第一个单位添加测试道具
const unit = golbalSetting.map.sprites[0];
addTestItemsToUnit(unit);
```

### 测试道具清单

添加后会获得以下道具：

**武器** (2种)
- 铁剑 (普通) - 可装备
- 魔法法杖 (稀有) - 可装备

**护甲** (2种)
- 皮甲 (普通) - 可装备
- 龙鳞甲 (传说) - 可装备

**消耗品** (3种)
- 生命药水 x15 (普通) - 可使用，恢复50 HP
- 魔力药水 x8 (罕见) - 可使用，恢复30 MP
- 终极灵药 x3 (史诗) - 可使用，完全恢复

**任务物品** (2种)
- 古老的钥匙 (稀有)
- 龙蛋 (传说)

**材料** (2种)
- 铁矿石 x45 (普通)
- 龙鳞 x7 (史诗)

**杂项** (2种)
- 金币袋 x150 (普通)
- 魔法卷轴 x5 (罕见)

## 💡 使用技巧

### 1. 快速找到道具
- 消耗品在顶部（通常最常用）
- 装备类道具有明显的边框颜色
- 传说/史诗道具会显眼的橙色/紫色边框

### 2. 管理背包空间
- 查看总重量，避免超重
- 定期丢弃不需要的道具
- 堆叠相同道具节省空间

### 3. 珍贵道具
- 任务物品通常很重要，不要丢弃
- 传说/史诗道具价值高，谨慎处理
- 查看道具详情了解完整属性

### 4. 保存提醒
- 道具会自动保存到存档中
- 使用道具、丢弃道具都会立即保存
- 读取存档会恢复所有道具

## 🐛 故障排除

### 背包是空的？
1. 确保单位已创建 `inventory` 属性
2. 使用测试工具添加道具
3. 检查控制台是否有错误

### 道具没有显示？
1. 检查 `unit.inventory` 是否有数据
2. 刷新页面重新加载
3. 查看浏览器控制台错误信息

### 使用道具没反应？
1. 确保道具 `canUse` 属性为 `true`
2. 检查道具的 `properties` 是否正确
3. 查看控制台日志

### 图标不显示？
- 道具图标使用 emoji 字符，不需要图片资源
- 如果添加了 `icon` 属性，确保图片路径正确

## 📝 开发笔记

- 背包组件路径: `src/components/CharacterDetailPannel/pages/CreatureInventory.vue`
- 测试工具: `src/components/CharacterDetailPannel/pages/InventoryTestUtil.ts`
- 道具系统: `src/core/item/`

## 🎨 界面特色

- 奇幻RPG风格设计
- 金色装饰和边框
- 稀有度渐变效果
- 平滑过渡动画
- 悬停高亮效果
- 响应式布局

---

**祝你游戏愉快！** 🎮✨
